{
  "entities": {
    "Tournament": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tournament",
      "type": "object",
      "description": "Represents a Texas Hold'em poker tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the tournament."
        },
        "name": {
          "type": "string",
          "description": "Name of the tournament."
        },
        "buyIn": {
          "type": "number",
          "description": "The buy-in amount for the tournament."
        },
        "startDate": {
          "type": "string",
          "description": "The start date and time of the tournament.",
          "format": "date-time"
        },
        "timerSettingsId": {
          "type": "string",
          "description": "Reference to TimerSettings. (Relationship: Tournament 1:1 TimerSettings)"
        }
      },
      "required": [
        "id",
        "name",
        "buyIn",
        "startDate",
        "timerSettingsId"
      ]
    },
    "TimerSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TimerSettings",
      "type": "object",
      "description": "Settings for the tournament timer, including blind levels and ante.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the timer settings."
        },
        "roundLength": {
          "type": "number",
          "description": "The length of each round in minutes."
        },
        "startingBlindSmall": {
          "type": "number",
          "description": "The starting small blind amount."
        },
        "startingBlindBig": {
          "type": "number",
          "description": "The starting big blind amount."
        },
        "ante": {
          "type": "number",
          "description": "The initial ante amount."
        },
        "blindLevels": {
          "type": "array",
          "description": "An array of blind levels.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "roundLength",
        "startingBlindSmall",
        "startingBlindBig",
        "ante",
        "blindLevels"
      ]
    },
    "BlindLevel": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BlindLevel",
      "type": "object",
      "description": "Represents a single blind level in the tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the blind level."
        },
        "smallBlind": {
          "type": "number",
          "description": "The small blind amount for this level."
        },
        "bigBlind": {
          "type": "number",
          "description": "The big blind amount for this level."
        },
        "ante": {
          "type": "number",
          "description": "The ante amount for this level."
        },
        "duration": {
          "type": "number",
          "description": "The duration of this blind level in minutes."
        },
        "timerSettingsId": {
          "type": "string",
          "description": "Reference to TimerSettings. (Relationship: TimerSettings 1:N BlindLevel)"
        }
      },
      "required": [
        "id",
        "smallBlind",
        "bigBlind",
        "ante",
        "duration",
        "timerSettingsId"
      ]
    },
    "PrizePool": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PrizePool",
      "type": "object",
      "description": "Represents the prize pool and payout information for a tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the prize pool."
        },
        "tournamentId": {
          "type": "string",
          "description": "Reference to Tournament. (Relationship: Tournament 1:1 PrizePool)"
        },
        "totalPrizePool": {
          "type": "number",
          "description": "The total prize pool amount."
        },
        "winnerPayout": {
          "type": "number",
          "description": "The amount paid out to the winner."
        }
      },
      "required": [
        "id",
        "tournamentId",
        "totalPrizePool",
        "winnerPayout"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/tournaments/{tournamentId}",
        "definition": {
          "entityName": "Tournament",
          "schema": {
            "$ref": "#/backend/entities/Tournament"
          },
          "description": "Stores details of each tournament.",
          "params": [
            {
              "name": "tournamentId",
              "description": "Unique identifier for the tournament."
            }
          ]
        }
      },
      {
        "path": "/timer_settings/{timerSettingsId}",
        "definition": {
          "entityName": "TimerSettings",
          "schema": {
            "$ref": "#/backend/entities/TimerSettings"
          },
          "description": "Stores settings for the tournament timer.",
          "params": [
            {
              "name": "timerSettingsId",
              "description": "Unique identifier for the timer settings."
            }
          ]
        }
      },
      {
        "path": "/timer_settings/{timerSettingsId}/blind_levels/{blindLevelId}",
        "definition": {
          "entityName": "BlindLevel",
          "schema": {
            "$ref": "#/backend/entities/BlindLevel"
          },
          "description": "Stores individual blind levels associated with timer settings.",
          "params": [
            {
              "name": "timerSettingsId",
              "description": "Unique identifier for the parent timer settings."
            },
            {
              "name": "blindLevelId",
              "description": "Unique identifier for the blind level."
            }
          ]
        }
      },
      {
        "path": "/prize_pools/{prizePoolId}",
        "definition": {
          "entityName": "PrizePool",
          "schema": {
            "$ref": "#/backend/entities/PrizePool"
          },
          "description": "Stores prize pool information for tournaments.",
          "params": [
            {
              "name": "prizePoolId",
              "description": "Unique identifier for the prize pool."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "user",
          "schema": {
            "$ref": "#/backend/entities/Tournament"
          },
          "description": "Root collection for user-related data.",
          "params": [
            {
              "name": "userId",
              "description": "Unique identifier for the user."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore structure is designed to manage Texas Hold'em poker tournaments, timer settings, blind levels, and prize pools. It prioritizes authorization independence by avoiding hierarchical `get()` calls and enforces a clear separation of concerns for improved security and debuggability.\n\n**Authorization Independence and QAPs:**\n\n*   The structure is designed for authorization independence, primarily using path-based ownership for `users/{userId}` related data and avoiding `get()` calls in security rules. Since there are no collaborative entities the use of Membership Maps are not required.\n*   Because path-based ownership is utilized, QAPs are inherently supported due to the isolation of user data. Listing tournaments owned by a user is easily secured by enforcing that the `request.auth.uid` matches the `userId` in the path.\n\n**Structure Overview:**\n\n*   `/tournaments/{tournamentId}`: Stores tournament details.\n*   `/timer_settings/{timerSettingsId}`: Stores timer settings associated with tournaments.\n*   `/timer_settings/{timerSettingsId}/blind_levels/{blindLevelId}`: Stores blind levels for each timer setting.\n*   `/prize_pools/{prizePoolId}`: Stores prize pool information for each tournament.\n*   `/users/{userId}`: Root for user-related data.  Could be expanded for profile data if needed in the future.\n\nThis structure facilitates clear and maintainable security rules, supporting secure `list` operations and scalable data management."
  }
}