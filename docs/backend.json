{
  "entities": {
    "Tournament": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tournament",
      "type": "object",
      "description": "Represents a poker tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the tournament."
        },
        "name": {
          "type": "string",
          "description": "Name of the tournament."
        },
        "buyIn": {
          "type": "number",
          "description": "The buy-in amount for the tournament."
        },
        "startingStack": {
          "type": "number",
          "description": "The number of chips each player starts with."
        },
        "blindStructureId": {
          "type": "string",
          "description": "Reference to BlindStructure. (Relationship: Tournament 1:1 BlindStructure)"
        },
        "payoutStructureId": {
          "type": "string",
          "description": "Reference to PayoutStructure. (Relationship: Tournament 1:1 PayoutStructure)"
        },
        "currentRound": {
          "type": "number",
          "description": "The current round number of the Tournament"
        }
      },
      "required": [
        "id",
        "name",
        "buyIn",
        "startingStack",
        "blindStructureId",
        "payoutStructureId"
      ]
    },
    "BlindStructure": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BlindStructure",
      "type": "object",
      "description": "Defines the structure of blinds and antes for a tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the blind structure."
        },
        "name": {
          "type": "string",
          "description": "Name of the blind structure (e.g., 'Standard', 'Turbo')."
        },
        "rounds": {
          "type": "array",
          "description": "A list of blind levels.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "rounds"
      ]
    },
    "BlindLevel": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BlindLevel",
      "type": "object",
      "description": "Represents a single blind level in the tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the blind level."
        },
        "blindStructureId": {
          "type": "string",
          "description": "Reference to BlindStructure. (Relationship: BlindStructure 1:N BlindLevel)"
        },
        "roundNumber": {
          "type": "number",
          "description": "The number for each round (e.g., 1,2,3)"
        },
        "smallBlind": {
          "type": "number",
          "description": "The small blind amount."
        },
        "bigBlind": {
          "type": "number",
          "description": "The big blind amount."
        },
        "ante": {
          "type": "number",
          "description": "The ante amount."
        },
        "duration": {
          "type": "number",
          "description": "The duration of the blind level in minutes."
        }
      },
      "required": [
        "id",
        "blindStructureId",
        "roundNumber",
        "smallBlind",
        "bigBlind",
        "ante",
        "duration"
      ]
    },
    "PayoutStructure": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PayoutStructure",
      "type": "object",
      "description": "Defines the payout structure for a tournament.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the payout structure."
        },
        "name": {
          "type": "string",
          "description": "Name of the payout structure (e.g., 'Winner Takes All')."
        },
        "payouts": {
          "type": "array",
          "description": "An array of payout entries.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "payouts"
      ]
    },
    "PayoutEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PayoutEntry",
      "type": "object",
      "description": "Represents a single payout entry (e.g., 1st place gets 100%).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the payout entry."
        },
        "payoutStructureId": {
          "type": "string",
          "description": "Reference to PayoutStructure. (Relationship: PayoutStructure 1:N PayoutEntry)"
        },
        "place": {
          "type": "number",
          "description": "The place that receives a payout (e.g., 1 for 1st place)."
        },
        "percentage": {
          "type": "number",
          "description": "The percentage of the prize pool awarded (e.g., 1.0 for 100%)."
        }
      },
      "required": [
        "id",
        "payoutStructureId",
        "place",
        "percentage"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/tournaments/{tournamentId}",
        "definition": {
          "entityName": "Tournament",
          "schema": {
            "$ref": "#/backend/entities/Tournament"
          },
          "description": "Stores tournament information. Includes denormalized `ownerId` for authorization independence (if needed).",
          "params": [
            {
              "name": "tournamentId",
              "description": "Unique identifier for the tournament."
            }
          ]
        }
      },
      {
        "path": "/blindStructures/{blindStructureId}",
        "definition": {
          "entityName": "BlindStructure",
          "schema": {
            "$ref": "#/backend/entities/BlindStructure"
          },
          "description": "Stores blind structure definitions.",
          "params": [
            {
              "name": "blindStructureId",
              "description": "Unique identifier for the blind structure."
            }
          ]
        }
      },
      {
        "path": "/blindStructures/{blindStructureId}/blindLevels/{blindLevelId}",
        "definition": {
          "entityName": "BlindLevel",
          "schema": {
            "$ref": "#/backend/entities/BlindLevel"
          },
          "description": "Stores individual blind levels associated with a blind structure.",
          "params": [
            {
              "name": "blindStructureId",
              "description": "Unique identifier for the blind structure."
            },
            {
              "name": "blindLevelId",
              "description": "Unique identifier for the blind level."
            }
          ]
        }
      },
      {
        "path": "/payoutStructures/{payoutStructureId}",
        "definition": {
          "entityName": "PayoutStructure",
          "schema": {
            "$ref": "#/backend/entities/PayoutStructure"
          },
          "description": "Stores payout structure definitions.",
          "params": [
            {
              "name": "payoutStructureId",
              "description": "Unique identifier for the payout structure."
            }
          ]
        }
      },
      {
        "path": "/payoutStructures/{payoutStructureId}/payoutEntries/{payoutEntryId}",
        "definition": {
          "entityName": "PayoutEntry",
          "schema": {
            "$ref": "#/backend/entities/PayoutEntry"
          },
          "description": "Stores individual payout entries associated with a payout structure.",
          "params": [
            {
              "name": "payoutStructureId",
              "description": "Unique identifier for the payout structure."
            },
            {
              "name": "payoutEntryId",
              "description": "Unique identifier for the payout entry."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to manage poker tournaments, blind structures, payout structures, and related data efficiently. The structure is optimized for querying and managing tournaments and their associated configurations.  Each collection is designed for homogeneous security, ensuring that rules can be applied consistently across all documents within a collection.\n\n**Authorization Independence:**\n\n*   No explicit authorization is required at this level. The app assumes an administrative role that manages all the data. We can introduce an `ownerId` field to Tournament to limit to specific user.\n\n**QAPs Support:**\n\n*   The design segregates data into different collections based on entity type, ensuring that queries can be efficiently performed against each entity without mixing data with different access requirements."
  }
}